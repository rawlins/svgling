<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kyle Rawlins">
<meta name="dcterms.date" content="2024-08-20">

<title>svgling - svgling Manual</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">svgling</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./manual.html" rel="" target="" aria-current="page">
 <span class="menu-text">Manual</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./gallery.html" rel="" target="">
 <span class="menu-text">Gallery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./CHANGELOG.html" rel="" target="">
 <span class="menu-text">Changelog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/rawlins/svgling" rel="" target="">
 <span class="menu-text">Source</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#overview-the-svgling-tree-drawing-package" id="toc-overview-the-svgling-tree-drawing-package" class="nav-link active" data-scroll-target="#overview-the-svgling-tree-drawing-package"><span class="header-section-number">1</span> Overview: the <code>svgling</code> tree-drawing package</a></li>
  <li><a href="#core-interface-and-tree-specification" id="toc-core-interface-and-tree-specification" class="nav-link" data-scroll-target="#core-interface-and-tree-specification"><span class="header-section-number">2</span> Core interface and tree specification</a>
  <ul class="collapse">
  <li><a href="#background-svg-formatting" id="toc-background-svg-formatting" class="nav-link" data-scroll-target="#background-svg-formatting"><span class="header-section-number">2.1</span> Background: SVG formatting</a></li>
  <li><a href="#sec-nodes-constituents" id="toc-sec-nodes-constituents" class="nav-link" data-scroll-target="#sec-nodes-constituents"><span class="header-section-number">2.2</span> Nodes and constituents</a></li>
  </ul></li>
  <li><a href="#nltk-integration" id="toc-nltk-integration" class="nav-link" data-scroll-target="#nltk-integration"><span class="header-section-number">3</span> NLTK integration</a></li>
  <li><a href="#tree-layout-and-display-options" id="toc-tree-layout-and-display-options" class="nav-link" data-scroll-target="#tree-layout-and-display-options"><span class="header-section-number">4</span> Tree layout and display options</a>
  <ul class="collapse">
  <li><a href="#layout-overview" id="toc-layout-overview" class="nav-link" data-scroll-target="#layout-overview"><span class="header-section-number">4.1</span> Layout overview</a></li>
  <li><a href="#debug-and-compatibility-options" id="toc-debug-and-compatibility-options" class="nav-link" data-scroll-target="#debug-and-compatibility-options"><span class="header-section-number">4.2</span> Debug and compatibility options</a></li>
  <li><a href="#overall-layout-options" id="toc-overall-layout-options" class="nav-link" data-scroll-target="#overall-layout-options"><span class="header-section-number">4.3</span> Overall layout options</a></li>
  <li><a href="#line-and-node-positioning-options" id="toc-line-and-node-positioning-options" class="nav-link" data-scroll-target="#line-and-node-positioning-options"><span class="header-section-number">4.4</span> Line and node positioning options</a></li>
  <li><a href="#edge-styles" id="toc-edge-styles" class="nav-link" data-scroll-target="#edge-styles"><span class="header-section-number">4.5</span> Edge styles</a></li>
  <li><a href="#text-options" id="toc-text-options" class="nav-link" data-scroll-target="#text-options"><span class="header-section-number">4.6</span> Text options</a></li>
  <li><a href="#per-node-styling" id="toc-per-node-styling" class="nav-link" data-scroll-target="#per-node-styling"><span class="header-section-number">4.7</span> Per-node styling</a></li>
  <li><a href="#sec-custom-nodes" id="toc-sec-custom-nodes" class="nav-link" data-scroll-target="#sec-custom-nodes"><span class="header-section-number">4.8</span> Advanced: custom node rendering</a></li>
  </ul></li>
  <li><a href="#tree-annotations" id="toc-tree-annotations" class="nav-link" data-scroll-target="#tree-annotations"><span class="header-section-number">5</span> Tree annotations</a>
  <ul class="collapse">
  <li><a href="#annotating-constituents" id="toc-annotating-constituents" class="nav-link" data-scroll-target="#annotating-constituents"><span class="header-section-number">5.1</span> Annotating constituents</a></li>
  <li><a href="#movement-arrows" id="toc-movement-arrows" class="nav-link" data-scroll-target="#movement-arrows"><span class="header-section-number">5.2</span> Movement arrows</a></li>
  </ul></li>
  <li><a href="#complex-figures" id="toc-complex-figures" class="nav-link" data-scroll-target="#complex-figures"><span class="header-section-number">6</span> Complex figures</a></li>
  <li><a href="#hybrid-htmlsvg-diagrams" id="toc-hybrid-htmlsvg-diagrams" class="nav-link" data-scroll-target="#hybrid-htmlsvg-diagrams"><span class="header-section-number">7</span> Hybrid HTML/SVG diagrams</a>
  <ul class="collapse">
  <li><a href="#hybrid-diagram-compatibility" id="toc-hybrid-diagram-compatibility" class="nav-link" data-scroll-target="#hybrid-diagram-compatibility"><span class="header-section-number">7.1</span> Hybrid diagram compatibility</a></li>
  </ul></li>
  <li><a href="#svgling-compatibility-and-conversion" id="toc-svgling-compatibility-and-conversion" class="nav-link" data-scroll-target="#svgling-compatibility-and-conversion"><span class="header-section-number">8</span> <code>svgling</code> compatibility and conversion</a>
  <ul class="collapse">
  <li><a href="#file-output" id="toc-file-output" class="nav-link" data-scroll-target="#file-output"><span class="header-section-number">8.1</span> File output</a></li>
  <li><a href="#format-conversion" id="toc-format-conversion" class="nav-link" data-scroll-target="#format-conversion"><span class="header-section-number">8.2</span> Format conversion</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/rawlins/svgling/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><code>svgling</code> Manual</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kyle Rawlins </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 20, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgling, svgling.html, svgling.figure</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> svgling.figure <span class="im">import</span> SideBySide, RowByRow, Caption</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="overview-the-svgling-tree-drawing-package" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Overview: the <code>svgling</code> tree-drawing package</h1>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<p><strong><code>svgling</code> package version</strong>: 0.5.0</p>
</div>
</div>
<p>This document is a detailed guide to using the <code>svgling</code> package; <code>svgling</code> is primarily a python tree-drawing package, aimed at linguists and computer scientists who want to draw constituent trees. It is tailored specifically towards rendering trees in Jupyter, but can be used for programmatically generating SVG and HTML tree diagrams in general – one major external interface for doing this is via the <a href="https://www.nltk.org/">nltk package</a>. Beyond SVG constituent trees, <code>svgling</code> additionally supports a number of other diagram features useful to linguists, and it supports easy exporting to raster images.</p>
</section>
<section id="core-interface-and-tree-specification" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Core interface and tree specification</h1>
<p>The main interface to <code>svgling</code> is <code>svgling.draw_tree</code>. This function takes a tree description, and named arguments specifying options, and returns a renderable tree object. The valid options are described below, and options parameters are used to construct a <code>svgling.core.TreeOptions</code> object; such an object can be passed directly and passed via a named argument <code>options</code>. The default options can be accessed via <code>svgling.core.TreeOptions()</code>.</p>
<ul>
<li>For non-Jupyter uses, the function <code>svgling.tree2svg</code> has the same API as <code>draw_tree</code>, but directly returns the converted SVG as a string. If <code>tree2svg</code> is provided an already rendered tree constructed from <code>draw_tree</code>, it will return that tree’s SVG.</li>
</ul>
<p>Here are two examples of how to specify a tree structure, together with how that tree structure will render:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>t0 <span class="op">=</span> (<span class="st">"S"</span>, (<span class="st">"NP"</span>, <span class="st">"D"</span>, <span class="st">"N"</span>), (<span class="st">"VP"</span>, <span class="st">"V"</span>, (<span class="st">"NP"</span>, <span class="st">"D"</span>, <span class="st">"A"</span>, <span class="st">"N"</span>)))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(t0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<p><img src="manual_files/figure-html/cell-4-output-1.svg" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>t1 <span class="op">=</span> (<span class="st">"S"</span>, (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"N"</span>, <span class="st">"rhinoceros"</span>)),</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>           (<span class="st">"VP"</span>, (<span class="st">"V"</span>, <span class="st">"saw"</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                  (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"A"</span>, <span class="st">"gray"</span>), (<span class="st">"N"</span>, <span class="st">"elephant"</span>))))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(t1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<p><img src="manual_files/figure-html/cell-5-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>The tree description can be in one of two forms: (i) an indexable object (e.g.&nbsp;list, tuple) consisting of a head at index 0 and a possibly empty sequence of subtrees at indices <span class="math inline">\(1..n\)</span>, or (ii) an object implementing the <code>nltk.tree.Tree</code> api (including nltk <code>Tree</code> objects themselves); this api stores the head label in the function <code>.label()</code> and the daughter subtrees as indices on the object. See <code>t0</code> and <code>t1</code> above for examples of the indexable format, but this is pretty standard notation going back to lisp, and corresponds directly to linearized trees in linguistics notation.</p>
<p>The package integrates with <code>nltk</code> if available, and by default, <code>nltk</code> will attempt to use <code>svgling</code> to render tree structures when displayed directly in the notebook. Rendering options for trees displayed this way can be adjusted by setting values on <code>svgling.core.default_options</code>, which is a <code>svgling.core.TreeOptions</code> instance. <code>nltk.tree.Tree</code> objects can also be passed directly to <code>draw_tree</code>. This leads to a third way to provide a tree description for rendering, by using the <code>Tree.fromstring</code> function:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> nltk.Tree.fromstring(<span class="st">"(S (NP (D the) (A gray) (N elephant)) (VP (V saw) (NP (D the) (N rhinoceros))))"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>t2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<p><img src="manual_files/figure-html/cell-6-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>NLTK integration is discussed in more detail below in the section <a href="#NLTK-integration">NLTK integration</a>.</p>
<section id="background-svg-formatting" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="background-svg-formatting"><span class="header-section-number">2.1</span> Background: SVG formatting</h2>
<p>Many options through this document interact with SVG formatting, via arguments pass to the <code>svgwrite</code> API. I won’t specify the details of this here, see <a href="https://svgwrite.readthedocs.io/en/latest/">the <code>svgwrite</code> docs</a> for details. Generally, <code>svgwrite</code> formatting parameters are validated and passed transparently through to svg itself with the python <code>_</code> character turned into <code>-</code>, so for details of how svgwrite parameters are interpreted, also see the SVG specification (and whatever viewer-specific documentation there is - not all SVG renderers are alike). I have generally not passed through all parameters, but rather chosen a few that I think are the most useful. Two key parameters that show up repeatedly for lines are <code>stroke</code> (which gets filled in with a color or <code>none</code>) and <code>stroke_width</code> (which gets filled in with a measurement, usually in user units for <code>svgling</code> trees).</p>
<p><strong>Units</strong>: SVG uses CSS-style units, which can be a little confusing. Here’s a quick reference primer on the ones that will come up in this manual.</p>
<ul>
<li><code>user units</code>: the default internal unit of an SVG diagram. For svgling trees, at their default sizing, <code>1</code> is equivalent to <code>1px</code>. However, trees may be resized depending on the display context.</li>
<li><code>px</code>: stands for “pixel”, but does not necessarily correspond literally to a pixel in CSS; the interpretation is more abstract. The increment <code>1px</code> corresponds to an optical reference unit that is the smallest object likely to be visible on a screen. Some but not all displays can render objects that are less than <code>1px</code>.</li>
<li><code>em</code>: the height of one line of text, at the current font size, from baseline to baseline.</li>
<li><code>%</code>: percentage of the immediately containing SVG box.</li>
<li><code>pt</code>: a unit inherited from print typography, but again in CSS this is interpreted kind of abstractly and won’t really correspond to any reliable physical distance (what you might expect from the history). Not recommended for screen-oriented rendering. For css and svg, <code>1pt = 0.75px</code> (so <code>12pt = 16px</code>, for the most useful special case).</li>
</ul>
</section>
<section id="sec-nodes-constituents" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-nodes-constituents"><span class="header-section-number">2.2</span> Nodes and constituents</h2>
<p><strong>Nodes</strong>: The core <code>draw_tree</code> interface accepts trees as lists of nodes and (recursively) trees, as described above. A node can be either:</p>
<ol type="1">
<li>A string, that will (more or less) be rendered as-is</li>
<li>The output of a node-builder function</li>
</ol>
<p>A string node may span multiple lines, which are separated by <code>\n</code>. For example: <code>"N\ncat"</code> gives a two-line node with <code>N</code> as the first line and <code>cat</code> as the second. Within a node, multiple lines are anchored at the middle (leading to centering). A label consisting of the empty string <code>""</code> is considered empty, and will not render at all – the lines will be joined in the middle of the row height. If you want a blank label, any sequence of whitespace will work, e.g.&nbsp;<code>" "</code>.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(<span class="st">"DP"</span>, <span class="st">"D</span><span class="ch">\n</span><span class="st">the"</span>, (<span class="st">"AP"</span>, <span class="st">"A</span><span class="ch">\n</span><span class="st">gray"</span>), (<span class="st">"NP"</span>, <span class="st">"N</span><span class="ch">\n</span><span class="st">cat"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<p><img src="manual_files/figure-html/cell-7-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>Node builder functions may be used to write custom node rendering (see <a href="#sec-custom-nodes">Section&nbsp;4.8</a> for more on this). At the moment, two are provided by default: <code>multiline_node</code> implements the default multiline string handling, and <code>subscript_node</code> implements a node with subscripting. <code>node</code> may be used as a shortcut to the default (and changing it will change the default behavior).</p>
<p>So for example, the following is equivalent to the simpler invocation in the previous cell, but explicitly parses the nodes:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> svgling.core <span class="im">import</span> node</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(node(<span class="st">"DP"</span>), node(<span class="st">"D</span><span class="ch">\n</span><span class="st">the"</span>), (node(<span class="st">"AP"</span>), node(<span class="st">"A</span><span class="ch">\n</span><span class="st">gray"</span>)), (node(<span class="st">"NP"</span>), node(<span class="st">"N</span><span class="ch">\n</span><span class="st">cat"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<p><img src="manual_files/figure-html/cell-8-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>The following example illustrates using the subscript node buiilder. Currently, the subscript builder does not support newlines.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(<span class="st">"CP"</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                  (<span class="st">"DP"</span>, svgling.core.subscript_node(<span class="st">"who"</span>, <span class="st">"i"</span>)),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                  (<span class="st">"TP"</span>, (<span class="st">"DP"</span>, svgling.core.subscript_node(<span class="st">"t"</span>, <span class="st">"i"</span>)),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                         (<span class="st">"VP"</span>, <span class="st">"danced"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<p><img src="manual_files/figure-html/cell-9-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong>Selecting nodes and constituents</strong>: For various purposes discussed throughout this manual, you can select particular parts of a tree (usually nodes or constituents) for formatting. To do this, you use what is sometimes called a <strong>tree path</strong>. These are sequences of indices that traverse the tree from the root node by choosing a daughter in left-to-right order. Indices begin at 0.</p>
<p>So for example, the path <code>(0,1,1)</code> gives the second daughter of the second daughter of the first daughter of the root node. The empty path <code>()</code> gives the subtree headed at the root. As this example illustrates, a path needn’t be complete, and for annotation purposes will typically be interpreted as selecting an entire constituent, though for some purposes it may select a node. As a reminder, a length 1 path written as a tuple will require a comma so that python can disambiguate it from just a regular number in parenthesis, e.g.&nbsp;<code>(0,)</code>. A path that selects a daughter node whose index is greater than the number of daughters at that point in the tree is invalid. Using negative indices is possible, and these will be interpreted like negative indices in python: e.g.&nbsp;<code>-1</code> selects the rightmost node, etc.</p>
<p>The following diagram illustrates some example valid tree paths as python tuples.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree((<span class="st">"()"</span>, (<span class="st">"(0,)"</span>, (<span class="st">"(0,0)"</span>, <span class="st">"(0,0,0)"</span>), (<span class="st">"(0,1)"</span>, <span class="st">"(0,1,0)"</span>, <span class="st">"(0,1,1)"</span>)),</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                         (<span class="st">"(1,)"</span>, <span class="st">"(1,0)"</span>, (<span class="st">"(1,1)"</span>, <span class="st">"(1,1,0)"</span>), (<span class="st">"(1,2)"</span>, <span class="st">"(1,2,0)"</span>, (<span class="st">"(1,2,1)"</span>, <span class="st">"(1,2,1,0)"</span>)))),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                 font_style<span class="op">=</span>svgling.core.MONO, average_glyph_width<span class="op">=</span><span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<p><img src="manual_files/figure-html/cell-10-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>Relative to the above tree, the paths <code>(2,)</code> and <code>(1,0,0)</code> would (for example) be invalid. The paths <code>(-1,-1,-1)</code> and <code>(-1,2,-2)</code> (for example) would select the subtree identified by <code>(1,2,1)</code> and <code>(1,2,0)</code> respectively.</p>
<p>An invalid path will result in an <code>IndexError</code> exception.</p>
<p><strong>Custom tree class handling</strong>: In order to handle custom tree classes, you can define a function to convert arbitrary node classes into strings and provide it via the <code>tree_split</code> options parameter. This function should, given an argument <code>t</code>, return a tuple consisting of a node label in the first element, and a possibly empty sequence of subtrees in the second element. It may return <code>None</code> to indicate that the node class isn’t handled by the function (in which case, built in conversion will be used.) As a simple example, here is a split function for objects using the <code>nltk.Tree</code> api – a version of this function is built in and automatically used when needed, but the API for custom functions is exactly the same.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> split_nltk(t):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="co"># a Tree object stores the node label on `label()`, and child nodes as a list.</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (t.label(), <span class="bu">list</span>(t))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">AttributeError</span>:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>One application for this is <code>nltk.tree.probabilistic.ProbabilisticTree</code> objects, and a simple split function is provided as <code>svgling.core.probtree_split</code> that renders both the label and the probability for each node that has one. See discussion below in the section <a href="#NLTK-integration">NLTK integration</a>.</p>
</section>
</section>
<section id="nltk-integration" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> NLTK integration</h1>
<p>The <code>svgling.draw_tree</code> function can handle <code>nltk.Tree</code> objects (or any object using the same API) transparently. By default, the <code>nltk</code> package on recent versions also implements <code>_repr_svg_()</code> using <code>svgling</code>, and so nltk Trees will render using this package.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># repeated from earlier:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> nltk.Tree.fromstring(<span class="st">"(S (NP (D the) (N elephant)) (VP (V saw) (NP (D the) (N rhinoceros))))"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>t2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<p><img src="manual_files/figure-html/cell-12-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>You can also supply <code>Tree</code> objects directly to <code>draw_tree</code>, which allows you to style them in more complex ways:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(t2, leaf_nodes_align<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<p><img src="manual_files/figure-html/cell-13-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>n.b.&nbsp;I’m not aware of any way to get <code>fromstring</code> to allow multi-line leafs, so if you want to do this in <code>nltk</code>, you’ll need to construct the tree more directly. (You can supply options for trees drawn this way as usual.)</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk <span class="im">import</span> Tree</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(Tree(<span class="st">'DP'</span>, [<span class="st">'D</span><span class="ch">\n</span><span class="st">the'</span>, Tree(<span class="st">'NP'</span>, [<span class="st">'N</span><span class="ch">\n</span><span class="st">cat'</span>])]), leaf_nodes_align<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<p><img src="manual_files/figure-html/cell-14-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>The rendering options for trees rendered this way can be customized via <code>svgling.core.default_options</code>. This object is created as a default <code>svgling.core.TreeOptions()</code>, so accepts all the options documented in this manual.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>svgling.core.default_options.leaf_nodes_align <span class="op">=</span> <span class="va">True</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>t2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<p><img src="manual_files/figure-html/cell-15-output-1.svg" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>svgling.core.reset_defaults()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>t2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<p><img src="manual_files/figure-html/cell-16-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>The <code>svgling.figure</code> utility classes documented in the section <a href="#Complex-figures">Complex figures</a> support nltk <code>Tree</code>s directly, and supports mixing of these objects and <code>svgling</code> renderable objects:</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgling.figure</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>svgling.figure.Caption(svgling.figure.SideBySide(svgling.draw_tree(t0), t1, padding<span class="op">=</span><span class="dv">32</span>),</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"Fig 1: Skeleton and instantiated tree"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<p><img src="manual_files/figure-html/cell-17-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong>Probabilistic trees</strong>. NLTK implements several tree subclasses; by default all of these will render identically (because they implement the same core API with a node label stored on <code>label()</code>). In some cases, it may be desireable to show further custom info on these trees, with the primary case being probabilistic trees (class <a href="https://www.nltk.org/api/nltk.tree.probabilistic.html"><code>nltk.tree.probabilistic.ProbabilisticTree</code></a>); for these, the inside probability of a parse is stored separately from the label itself, on the <code>prob()</code> function. This probability can be shown by using the custom node rendering API, and in fact a split function for these trees that accomplishes this is built in as <code>svgling.core.probtree_split</code>. The following example demonstrates rendering a probabilistic tree; note that in this nltk class leaf nodes are normally still stored as strings.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tree.probabilistic <span class="im">import</span> ProbabilisticTree</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># a simple example; typically these probabilities would be set by a parser, not by hand. See the figure gallery</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for a more realistic example.</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> ProbabilisticTree.fromstring(<span class="st">"(X (Y leaf) leaf)"</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>x.set_prob(<span class="fl">0.5</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>].set_prob(<span class="fl">0.2</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># default rendering, and rendering with probabilities.</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>SideBySide(x, svgling.draw_tree(x, tree_split<span class="op">=</span>svgling.core.probtree_split))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<p><img src="manual_files/figure-html/cell-18-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="tree-layout-and-display-options" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Tree layout and display options</h1>
<p>The customizable <code>TreeOptions</code> parameters are described in the rest of this section.</p>
<section id="layout-overview" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="layout-overview"><span class="header-section-number">4.1</span> Layout overview</h2>
<p><strong>Vertical layout</strong>: A node at depth <span class="math inline">\(n\)</span> (where the root node of the tree is depth <span class="math inline">\(0\)</span>) is positioned vertically in a line with all other nodes of depth <span class="math inline">\(n\)</span>. Exception (see below for examples): if <code>leaf_nodes_align</code> is set to true, any leaf nodes are aligned with the lowest level of the tree, rather than depth they would otherwise be at. Within a row, vertical space is allowed for the tallest node at that depth; positioning of shorter nodes at that depth is configurable. Vertical spacing is calculated/generated in <em>em</em>s.</p>
<p><strong>Horizontal layout</strong>: The horizontal position of daughter nodes relative to a parent is determined by a (configurable) algorithm, usually based on some measure of the size of the daughter nodes. By default, this algorithm estimates the max text width taken up by the parent node label or the width of daughter nodes (and their daughters, etc). See below for examples of other options. No node will be positioned vertically below a node that does not dominate it. There is also a configurable padding parameter. Horizontal spacing is calculated initially in estimated <em>em</em>s, but (canvas width aside) is converted to percentages for svg layout. Because <code>svgling</code> does not do multi-pass rendering, it uses heuristics for glyph width rather than accurately calculating glyph width. (To do this, you’d basically need to render to a device, and see what happens.)</p>
<p><strong>Canvas layout</strong>: The canvas width is estimated from node text width + padding. The canvas height is determined by the tree depth, level heights, with an extra 1em at the bottom of the canvas for descenders from leaf node glyphs.</p>
</section>
<section id="debug-and-compatibility-options" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="debug-and-compatibility-options"><span class="header-section-number">4.2</span> Debug and compatibility options</h2>
<p><strong><code>debug</code></strong>: When this option is set to <code>True</code>, the rendered will show a <code>1em</code> grid, as well as a red box for every subtree. This can be useful if something isn’t doing what you expect. Several of the documentation examples below use this to illustrate various spacing options.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(t1, debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<p><img src="manual_files/figure-html/cell-19-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong><code>relative_units</code></strong>: When this option is set to <code>False</code>, do not use relative units in the generated svg (e.g.&nbsp;no <code>em</code>s). This will instead use <code>px</code> values generated from the local font options. This is not guaranteed to work in general, but it should at least work with standard cases where there is no complicated font manipulation. This option is designed for compatibility with Inkscape.</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(t1, relative_units<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<p><img src="manual_files/figure-html/cell-20-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="overall-layout-options" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="overall-layout-options"><span class="header-section-number">4.3</span> Overall layout options</h2>
<p>The following are <code>TreeOptions</code> parameters that affect layout.</p>
<p><strong><code>horiz_spacing</code></strong>: This parameter determines how daughter nodes are spaced horizontally relative to the parent. Possible values are <code>svgling.core.HorizSpacing.TEXT</code> (default; space proportionally based on estimated text width), <code>svgling.core.HorizSpacing.EVEN</code> (space evenly based on number of immediate daughters), and <code>svgling.core.HorizSpacing.NODES</code> (space proportionally to the number of leaf nodes in the subtrees).</p>
<p>Usually <code>TEXT</code> looks best, but the other two may be preferable for abstract trees where label widths are all similar. Without manual adjustment, the two other options will deal poorly with long labels.</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>examples <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>demo_trees <span class="op">=</span> [t0, t1]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> opt <span class="kw">in</span> svgling.core.HorizSpacing:</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    row <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(demo_trees)):</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># debug mode on so that the exact rendering differences are very obvious</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        row.append(Caption(svgling.draw_tree(demo_trees[t], horiz_spacing<span class="op">=</span>opt, debug<span class="op">=</span><span class="va">True</span>), <span class="st">"Example t</span><span class="sc">%d</span><span class="st"> with horiz_spacing=</span><span class="sc">%s</span><span class="st">"</span> <span class="op">%</span> (t, <span class="bu">str</span>(opt))))</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    examples.append(SideBySide(<span class="op">*</span>row))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>RowByRow(<span class="op">*</span>examples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<p><img src="manual_files/figure-html/cell-21-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong><code>average_glyph_width</code></strong>: A heuristic factor used to calculate text widths; basically, a divisor in <em>em</em>s. Defaults to <code>2.0</code>. Does not generally need to be adjusted for default settings (which try to just use Times), but may be worth adjusting for custom fonts.</p>
<p><strong><code>leaf_padding</code></strong>: An amount to pad each leaf by, in glyphs. Will be divided by <code>average_glyph_width</code>. Default is 2. Negative values are possible, but will usually result in text being cut off. Leaf padding is applied as a constant to the overall canvas size regardless of the value of <code>horiz_spacing</code> (i.e.&nbsp;the canvas size is always determined by the sum of node widths plus leaf padding at every widest subtree), so will impact spacing to some degree for any setting of this option, but is only applied directly to each leaf for <code>HorizSpacing.TEXT</code>.</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>examples <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> (<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="op">-</span><span class="dv">2</span>):</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    examples.append(Caption(svgling.draw_tree(t1, leaf_padding<span class="op">=</span>i), <span class="st">"Example t1 with leaf_padding=</span><span class="sc">%g</span><span class="st">"</span> <span class="op">%</span> i))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>RowByRow(<span class="op">*</span>examples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<p><img src="manual_files/figure-html/cell-22-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong><code>vert_align</code></strong>: How row alignment when there are multi-line labels should be calculated. If all labels in a row have the same height, this has no impact, but if there are differences, it controls the position of the shorter node labels vertically. Default is centered. For empty labels, this affects the position of the line join. The values <code>TOP</code>, <code>CENTER</code>, and <code>BOTTOM</code> are self-explanatory. <code>svgling.VertAlign.EVEN</code> causes all nodes to be treated as the same height (relative to their row) regardless of text contents, even empty nodes.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>t4 <span class="op">=</span> (<span class="st">"X"</span>, (<span class="st">"multiline</span><span class="ch">\n</span><span class="st">label"</span>, <span class="st">"Y"</span>), (<span class="st">""</span>, <span class="st">"Z</span><span class="ch">\n</span><span class="st">A"</span>), (<span class="st">"A"</span>, <span class="st">"B"</span>), <span class="st">"C"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>examples <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> opt <span class="kw">in</span> svgling.core.VertAlign:</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    examples.append(Caption(svgling.draw_tree(t4, vert_align<span class="op">=</span>opt), <span class="st">"Example t4 with vert_align=</span><span class="sc">%s</span><span class="st">"</span> <span class="op">%</span> <span class="bu">str</span>(opt)))</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>RowByRow(<span class="op">*</span>examples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<p><img src="manual_files/figure-html/cell-23-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong><code>distance_to_daughter</code></strong>: The distance between rows in <em>em</em>s – that is, distance from the bottom of one row to the top of another. Values less than about 0.5 are not recommended and will usually result in rendering oddities. Default is 2.</p>
<p>Note that a margin for glyph descenders is included in the distance between levels (not in the node height), so a value of 0.25<em>em</em>s (by default) will give perfectly straight lines, rather than 0.0. This value can be accessed as <code>svgling.core.NodePos.descender_margin</code>.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>examples <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> (<span class="fl">0.5</span>, <span class="dv">2</span>, <span class="dv">4</span>, svgling.core.NodePos.descender_margin):</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    examples.append(Caption(svgling.draw_tree(t1, distance_to_daughter<span class="op">=</span>i), <span class="st">"Example t1 with distance_to_daughter=</span><span class="sc">%g</span><span class="st">"</span> <span class="op">%</span> i))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>RowByRow(<span class="op">*</span>examples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<p><img src="manual_files/figure-html/cell-24-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="line-and-node-positioning-options" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="line-and-node-positioning-options"><span class="header-section-number">4.4</span> Line and node positioning options</h2>
<p><strong><code>leaf_nodes_align</code></strong>: if true, will align all leaf nodes with the lowest depth leaf nodes in the tree.</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>SideBySide(svgling.draw_tree(t1, leaf_nodes_align<span class="op">=</span><span class="va">True</span>), svgling.draw_tree(<span class="st">"DP"</span>, <span class="st">"D</span><span class="ch">\n</span><span class="st">the"</span>, (<span class="st">"AP"</span>, <span class="st">"A</span><span class="ch">\n</span><span class="st">gray"</span>), (<span class="st">"NP"</span>, <span class="st">"N</span><span class="ch">\n</span><span class="st">cat"</span>), leaf_nodes_align<span class="op">=</span><span class="va">True</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<p><img src="manual_files/figure-html/cell-25-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong><code>descend_direct</code></strong>: When an edge skips levels (currently only possible for leaf nodes, when <code>leaf_nodes_align=True</code>), should the line go directly from the parent to the daughter? If <code>False</code>, the line will go to the position that the daughter would have been at as if there is an empty node there, and descend vertically. This can be useful for very deep trees where a <code>True</code> value results in overlapping, and also in some cases may just look better. However, it doesn’t allow distinguishing empty nodes visually in the tree. As with empty nodes, the positioning of the line join is affected by <code>vert_align</code>. Defaults to <code>True</code>.</p>
<p>The following example shows a tree that renders quite badly without this option set to <code>True</code>, because of the asymmetry between leaf node widths.</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>t4 <span class="op">=</span> (<span class="st">"A"</span>, <span class="st">"B"</span>, (<span class="st">"C"</span>, (<span class="st">"D"</span>, <span class="st">"middle leaf"</span>), <span class="st">"H"</span>), (<span class="st">"E"</span>, <span class="st">"long leaf"</span>, <span class="st">"G"</span>))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>examples <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> opt <span class="kw">in</span> (<span class="va">True</span>, <span class="va">False</span>):</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    examples.append(Caption(svgling.draw_tree(t4, leaf_nodes_align<span class="op">=</span><span class="va">True</span>, descend_direct<span class="op">=</span>opt), <span class="st">"Example t4 with descend_direct=</span><span class="sc">%s</span><span class="st">"</span> <span class="op">%</span> <span class="bu">str</span>(opt)))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>SideBySide(<span class="op">*</span>examples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<p><img src="manual_files/figure-html/cell-26-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p><strong><code>leaf_edges</code></strong>: set to <code>False</code> to suppress edges leading to leaf nodes; more specifically, this draws the edge as an <code>EmptyEdge</code> still with the default distance value (<code>0.0</code>); see below for more on this edge style.</p>
</section>
<section id="edge-styles" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="edge-styles"><span class="header-section-number">4.5</span> Edge styles</h2>
<p>Custom styles can be applied to specific edges. The main application for this is drawing so-called “triangles of laziness”, but it does also allow you to change the color of particular edges and other related things. There is currently no way to change the edge styles for a tree as a whole (I’ll implement such a thing if there’s demand for it). Be aware that non-direct descents are implemented as an edge style, so if you apply a style to a leaf node with <code>leaf_nodes_align=True</code>, then it can override the indirect descent style; use the <code>IndirectDescent</code> class to avoid this.</p>
<p>There are several classes that encapsulate edge styles: * <code>svgling.core.EdgeStyle</code> is the default edge style. It allows two svg parameters: <code>stroke</code> and <code>stroke_width</code>. * <code>svgling.core.IndirectDescent</code> implements indirect descents for nodes that skip levels. It inherits the svg parameters of <code>EdgeStyle</code>. This can be set globally via the <code>descend_direct</code>. * <code>svgling.core.TriangleEdge</code> draws a triangle with points at the center of the parent, and the left and right bounds of the daughter text. (Note that, as usual, text width is calculated heuristically.) This class also inherits the svg parameters of <code>EdgeStyle</code>. * <code>svgling.core.EmptyEdge</code> draws nothing at all. This has a configurable <code>distance</code> parameter, defaulting to 0.0. A value of 0.0 puts the top of the lower node at the baseline of the upper node. Pass <code>auto_distance=True</code> to instead use the distance that a regular edge would use. To set a value for all such edges, you can set <code>svgling.core.EmptyEdge.default_distance</code> (<code>None</code> here means use <code>auto_distance=True</code>). A main use of this is to easily do (what will be rendered as) multi-line nodes when working with nltk.</p>
<p>To set an edge style on a specific edge, call <code>set_edge_style</code> on the layout object with a path and one of the above objects. This function (and most that annotate or modify the style of a tree) modifies a tree object in place, but it also returns <code>self</code> in order to allow repeated styling calls, as in the following example:</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>t5 <span class="op">=</span> (<span class="st">"S"</span>, (<span class="st">"NP"</span>, <span class="st">"The subject of this sentence"</span>), (<span class="st">"VP"</span>, <span class="st">"is collapsed"</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># repeated styling calls without an intermediate assignment:</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> (svgling.draw_tree(t5)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>       .set_edge_style((<span class="dv">0</span>,<span class="dv">0</span>), svgling.core.TriangleEdge())</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>       .set_edge_style((<span class="dv">1</span>,<span class="dv">0</span>), svgling.core.TriangleEdge()))</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># now for some gratuitous formatting. Let's use a simpler assignment style for this one:</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>out.set_edge_style((<span class="dv">0</span>,), svgling.core.EdgeStyle(stroke_width<span class="op">=</span><span class="dv">4</span>, stroke<span class="op">=</span><span class="st">"red"</span>))</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>out.set_edge_style((<span class="dv">1</span>,), svgling.core.EdgeStyle(stroke_width<span class="op">=</span><span class="dv">4</span>))</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>out</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<p><img src="manual_files/figure-html/cell-27-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>Given a tree object with arbitrary styling, you can obtain a default-styled instance of the tree by calling <code>reset()</code>. This function returns a copy, and does not modify the original.</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>out.reset()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<p><img src="manual_files/figure-html/cell-28-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="text-options" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="text-options"><span class="header-section-number">4.6</span> Text options</h2>
<p><strong><code>font_style</code></strong>: a css-formatted string that will be used to style text in the tree. Since this is css, you can put all sorts of stuff in it, but I recommend at least including <code>font-family</code>, <code>font-weight</code>, and <code>font-style</code>, because without these font rendering may be inconsistent depending on where the svg is embedded (for example showing as serif in some settings, sans-serif in others). If you are sharing your svg with others, I recommend sticking to web-safe fonts, with fallbacks. The default values is: <code>"font-family: times, serif; font-weight:normal; font-style: normal;"</code>. You cannot set font size this way.</p>
<p>A convenience function, <code>svgling.core.cssfont</code> takes a family and an optional named <code>weight</code> and <code>style</code> parameter and produces these strings. In addition, <code>svgling.core.SERIF</code> (the default), <code>svgling.core.SANS</code>, and <code>svgling.core.MONO</code> provide some useful presets.</p>
<p><strong><code>font_size</code></strong>: a numeric value, to be interpreted in user units, for the font size. At the default sizing, <code>1</code> user unit corresponds to <code>1px</code>; SVG diagrams may be resized arbitrarily so changing the font size does not in general guarantee a bigger diagram, but it usually does. The default is <code>16</code> (which corresponds to <code>12pt</code> at the default scaling).</p>
<p><strong><code>text_color</code></strong>: change the color of text in a tree. This option takes css color values. See <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">css documentation</a> for more on what the valid options are.</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>t1 <span class="op">=</span> (<span class="st">"S"</span>, (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"N"</span>, <span class="st">"rhinoceros"</span>)), (<span class="st">"VP"</span>, (<span class="st">"V"</span>, <span class="st">"saw"</span>), (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"A"</span>, <span class="st">"gray"</span>), (<span class="st">"N"</span>, <span class="st">"elephant"</span>))))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>styles <span class="op">=</span> ((<span class="st">"font-family: georgia, times, serif; font-weight:normal; font-style: normal;"</span>, <span class="dv">26</span>, <span class="st">"black"</span>),</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>          (<span class="st">"font-family: sans-serif; font-weight:normal; font-style: normal;"</span>, <span class="dv">16</span>, <span class="st">"red"</span>),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>          (svgling.core.cssfont(<span class="st">"impact, times, serif"</span>, style<span class="op">=</span><span class="st">"italic"</span>), <span class="dv">12</span>, <span class="st">"#FF69B4"</span>))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>examples <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(styles)):</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    examples.append(Caption(svgling.draw_tree(t1, font_style<span class="op">=</span>styles[i][<span class="dv">0</span>], font_size<span class="op">=</span>styles[i][<span class="dv">1</span>], text_color<span class="op">=</span>styles[i][<span class="dv">2</span>]),</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Example t1 with style </span><span class="sc">%d</span><span class="st">"</span> <span class="op">%</span> i))</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>RowByRow(<span class="op">*</span>examples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<p><img src="manual_files/figure-html/cell-29-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="per-node-styling" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="per-node-styling"><span class="header-section-number">4.7</span> Per-node styling</h2>
<p>A limited amount of per-node styling is possible, via the functions <code>set_subtree_style</code>, <code>set_node_style</code>, and <code>set_leaf_style</code> on an existing tree. The first two of these take a tree path and some options, and the third just takes options. These currently allow changing only the font size, style, and color, and turning on debug mode for part of the tree.</p>
<p>Caveats: * The tree layout is still primarily determined by the global font size. In particular, the <code>distance_to_daughter</code> option is always interpreted relative to that font size. So if you are changing many nodes, it can make sense to adjust the global tree font size as well. * Adding per-node styling will reset any existing tree annotations, so you will need to apply annotation calls after node styling calls.</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> svgling.draw_tree(t1)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>out.set_leaf_style(font_style <span class="op">=</span> svgling.core.cssfont(<span class="st">"impact, times, serif"</span>, style<span class="op">=</span><span class="st">"italic"</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>out.set_node_style((<span class="dv">1</span>,<span class="dv">1</span>), font_size<span class="op">=</span><span class="dv">30</span>, text_color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>out.set_subtree_style((<span class="dv">0</span>,), font_size<span class="op">=</span><span class="dv">10</span>, debug<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>out</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<p><img src="manual_files/figure-html/cell-30-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="sec-custom-nodes" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="sec-custom-nodes"><span class="header-section-number">4.8</span> Advanced: custom node rendering</h2>
<p><a href="#sec-nodes-constituents">Section&nbsp;2.2</a> provided examples of how to use the built-in node builder functions. The <code>svgling</code> package also allows you to define custom node-builder functions, and by doing so, use arbitrary SVG in a tree node, via the <code>svgwrite</code> package. A node-builder function should be decorated with <code>@svgling.core.node_builder</code> and return a <code>svgling.core.NodePos</code> object that has the correct dimensions set (currently, these cannot be inferred from SVG). <code>NodePos</code> is a wrapper class for an arbitrary SVG object using the <code>svgwrite</code> package. The details of constructing SVG diagrams progamattically go somewhat beyond the scope of this manual, and I won’t explain the SVG format or the <a href="https://svgwrite.readthedocs.io/en/latest/">svgwrite api</a> in detail here. But generally, you will want to construct <code>svgwrite.container.SVG</code> objects that contain <code>svgwrite.text.Text</code> objects, possibly with <code>svgwrite.text.TSpan</code> objects within those.</p>
<p>Specific notes on constructing <code>NodePos</code> and the contained svg objects:</p>
<ul>
<li>Minimally, the returned <code>NodePos</code> should have <code>width</code> and <code>height</code> set (otherwise, they default to <code>0</code>). These can be set as named parameters to the constructor, or via the <code>set_dimensions</code> function, which also takes them as named parameters.</li>
<li>It is also recommended to set <code>text</code> to something readable, so that the object can be inspected without svg rendering.</li>
<li><code>x</code> and <code>y</code> can be used to shift position relative to the tree; <code>x=50</code> centers (and is probably what you want in most cases).</li>
<li>User coordinates can be assumed to match <code>px</code>, and for text rendering, unless you explicitly set font size, you should use the provided <code>options</code> value to get font sizing via <code>em</code> (provides a string with units) and <code>em_to_px</code> (provides a number in user coordinates).</li>
<li>The <code>options</code> parameter will be filled in when building a tree, but you should allow for direct calls for debugging.</li>
<li>The position of 0,0 is relative to a container constructed on top of NodePos. You can assume that it will have the width specified by NodePos, with height specified by NodePos with some extra y space; the below example demonstrates this.</li>
<li>Tips: use debug mode. Draw reference points when testing (e.g.&nbsp;<code>svgwrite.shapes.Circle((0,0), r=3, fill=options.text_color)</code>).</li>
</ul>
<p>The following cell provides a small example of implementing a node builder. As you can see, the svg standard is the limit in what you can draw here, but dealing with positioning is overall not entirely trivial. A good node builder will also be responsive to the options provided from a tree context, illustrated in the text settings below.</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgwrite</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">@svgling.core.node_builder</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flip_node(text, sideways<span class="op">=</span><span class="va">False</span>, options<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> options <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        options <span class="op">=</span> svgling.core.TreeOptions()</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get the text width in `em`s based on the input string</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    width <span class="op">=</span> options.label_width(text)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    svg_parent <span class="op">=</span> svgwrite.container.SVG(x<span class="op">=</span><span class="dv">0</span>, y<span class="op">=</span><span class="dv">0</span>, width<span class="op">=</span><span class="st">"100%"</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># general recipe for setting up an appropriate Text object. We are inheriting</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># style from the tree other than these.</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    svgtext <span class="op">=</span> svgwrite.text.Text(text, insert<span class="op">=</span>(<span class="st">"50%"</span>, <span class="co"># x pos at 50%</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>                                               svgling.core.em(<span class="dv">1</span>, options)), <span class="co"># y pos (baseline) at 1em</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>                                               text_anchor<span class="op">=</span><span class="st">"middle"</span>, <span class="co"># align text in the middle</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>                                               fill<span class="op">=</span>options.text_color, <span class="co"># use options to set fill/stroke</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>                                               stroke<span class="op">=</span>options.text_stroke)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the hard part is figuring out the center point to rotate around, which is in user</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># coordinates relative to the node container. The center position of a line of text</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is not simply 0.5em, because the baseline-to-baseline distance includes space for</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># an ascender, and not space for a descender. In addition, the normal node margin</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># applies only to the bottom of a node, not the top. Therefore, adjust the center</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># downwards by approximately the height of a descender, to ensure half a descender</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># margin on each side.</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    center <span class="op">=</span> (options.em_to_px(width) <span class="op">/</span> <span class="dv">2</span>, options.em_to_px(<span class="fl">0.5</span> <span class="op">+</span> svgling.core.NodePos.descender_margin))</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> sideways <span class="kw">and</span> <span class="bu">len</span>(text) <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        <span class="co"># exercise left to reader: arbitrary positioning/sizing for sideways nodes that are &gt; 1 char</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">NotImplementedError</span>(<span class="st">"Sideways rotation requires len(text)==1"</span>)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    degrees <span class="op">=</span> sideways <span class="kw">and</span> <span class="dv">90</span> <span class="kw">or</span> <span class="dv">180</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    svgtext.rotate(degrees, center)</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    svg_parent.add(svgtext)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> svgling.core.NodePos(svg_parent, x<span class="op">=</span><span class="dv">50</span>, y<span class="op">=</span><span class="dv">0</span>, width<span class="op">=</span>width, height<span class="op">=</span><span class="fl">1.0</span>, options<span class="op">=</span>options, text<span class="op">=</span><span class="ss">f"flip_node(</span><span class="sc">{</span>text<span class="sc">}</span><span class="ss">)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For debugging purposes, the return value of one of these objects can be inspected directly (though note that exceptions will not be shown unless you manually call <code>_repr_svg_</code>):</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>flip_node(<span class="st">"Table"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<p><img src="manual_files/figure-html/cell-32-output-1.svg" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>svgling.draw_tree(<span class="st">"Emoji"</span>, <span class="st">"(╯°□°)╯"</span>, flip_node(<span class="st">"("</span>, sideways<span class="op">=</span><span class="va">True</span>), flip_node(<span class="st">"Table"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<p><img src="manual_files/figure-html/cell-33-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="tree-annotations" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Tree annotations</h1>
<p>The <code>draw_tree</code> function returns a <code>TreeLayout</code> object which can be further manipulated by adding what are called annotations. These are extra graphics that overlay on the tree, and typically interact with the tree’s structure. These annotations make heavy use of <strong>tree paths</strong>, discussed in section 1.</p>
<section id="annotating-constituents" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="annotating-constituents"><span class="header-section-number">5.1</span> Annotating constituents</h2>
<p>If you want to highlight a specific constituent, you can draw a box around it, and/or underline it.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(svgling.draw_tree(t1)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>     .underline_constituent((<span class="dv">0</span>,))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>     .underline_constituent((<span class="dv">1</span>,<span class="dv">1</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<p><img src="manual_files/figure-html/cell-34-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>Both of these functions accept a number of extra svg arguments determining the details of the annotation. For <code>box_constituent</code>, you can pass <code>stroke</code>, <code>stroke_width</code>, <code>fill</code>, <code>fill_opacity</code>, and <code>rounding</code>. For <code>underline_constituent</code> you can pass <code>stroke</code>, <code>stroke_width</code>, and <code>stroke_opacity</code>. As can be seen above, boxes default to light non-opaque gray with rounded edges, and no stroke.</p>
</section>
<section id="movement-arrows" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="movement-arrows"><span class="header-section-number">5.2</span> Movement arrows</h2>
<p>Movement arrows can be drawn between arbitrary constituents; <code>svgling</code> will attempt to keep them from overlapping with each other or with the tree. The arrow always starts below the center of the first constituent, descends, moves horizontally, and attaches vertically to the center of the second constituent. It can be convenient to combine arrows with some kind of constituent-grouping annotation, for complex constituents. The following example illustrates movement arrows in a typical case of Quantifier Raising.</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>t4 <span class="op">=</span> (<span class="st">"TP"</span>, (<span class="st">"DP"</span>, (<span class="st">"D"</span>, <span class="st">"every"</span>), (<span class="st">"NP"</span>, (<span class="st">"N"</span>, <span class="st">"cat"</span>))),</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>           (<span class="st">"TP"</span>, <span class="st">"1"</span>, (<span class="st">"TP"</span>, (<span class="st">"DP"</span>, (<span class="st">"D"</span>, <span class="st">"some"</span>), (<span class="st">"NP"</span>, (<span class="st">"N"</span>, <span class="st">"dog"</span>))),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                     (<span class="st">"TP"</span>, <span class="st">"3"</span>, (<span class="st">"TP"</span>, (<span class="st">"DP"</span>, svgling.core.subscript_node(<span class="st">"t"</span>, <span class="st">"1"</span>)),</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                                  (<span class="st">"VP"</span>, (<span class="st">"V"</span>, <span class="st">"likes"</span>), (<span class="st">"DP"</span>, svgling.core.subscript_node(<span class="st">"t"</span>, <span class="st">"3"</span>))))))))</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>(svgling.draw_tree(t4)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    .movement_arrow((<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), (<span class="dv">0</span>,))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    .underline_constituent((<span class="dv">0</span>,))</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    .movement_arrow((<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>), (<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>), stroke_width<span class="op">=</span><span class="dv">1</span>, stroke<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    .underline_constituent((<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<p><img src="manual_files/figure-html/cell-35-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="complex-figures" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Complex figures</h1>
<p>As several of the above examples illustrate, <code>svgling.figure</code> provides facilities for generating more complex figures out of svg drawings. These classes are still rather basic, and they don’t do well for really arbitrary figures, but they do well enough for combining <code>svgling</code> trees together. In principle, they work on any object that implements the following functions:</p>
<ul>
<li><code>get_svg()</code>: return an <code>svgwrite</code> object.</li>
<li><code>height()</code>: get the intended diagram height <em>in px</em>.</li>
<li><code>width()</code>: get the intended diagram width <em>in px</em>.</li>
</ul>
<p>All the classes described here implement this interface, and so may be combined. See the above text for examples of all three of these classes. These figure classes all use a viewbox, so the sub-diagram’s reported dimensions are used in user units, and the complex figure reports its own height/width in <code>px</code>.</p>
<p>If an object does not support <code>get_svg()</code>, the <code>svgling.caption</code> objects will attempt to convert it to a tree via <code>svgling.draw_tree</code>. The primary use case for this is so that <code>nltk</code> objects can be easily put in figures. (A surprising number of text-like objects also do work this way.)</p>
<p><strong><code>Caption</code></strong>: This places a text caption below an svg drawing. Construct with <code>Caption(fig, text)</code>.</p>
<p><strong><code>SideBySide</code></strong>: This places a list of svg drawings in a row. Construct with <code>SideBySide(fig1, fig2, ..., fign, padding=x)</code>, where <code>padding</code> gives a padding in pixels to be applied between subfigures and in the left and right margin.</p>
<p><strong><code>RowByRow</code></strong>: This places a list of svg drawings in a column. Construct with <code>RowByRow(fig1, fig2, ..., fign, padding=x)</code>, where <code>padding</code> gives a padding pixels to be applied between subfigures and in the top and bottom margin. By default, if the rows are themselves <code>SideBySide</code> objects, this will adjust the widths so that individual diagrams form a grid. To disable this, pass <code>gridify=False</code> to the constructor.</p>
<p><strong><code>svgling.semantics.DoubleBrackets</code></strong>: There is so far one linguistics-specific complex figure class, which produces semantics-style double brackets around a tree. Simply call this with a tree layout object to get decent results. You can also adjust <code>padding</code> (including negatively) and <code>bracket_width</code>. Here’s an example from Heim and Kratzer 1998, ch.&nbsp;2:</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgling.semantics</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>svgling.semantics.DoubleBrackets(svgling.draw_tree(<span class="st">"S"</span>, (<span class="st">"NP"</span>, (<span class="st">"N"</span>, <span class="st">"Ann"</span>)), (<span class="st">"VP"</span>, (<span class="st">"V"</span>, <span class="st">"smokes"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<p><img src="manual_files/figure-html/cell-36-output-1.svg" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># illustrate direct use of an nltk.Tree object</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>svgling.semantics.DoubleBrackets(nltk.Tree.fromstring(<span class="st">"(S (NP (D the) (N elephant)) (VP (V saw) (NP (D the) (N rhinoceros))))"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<p><img src="manual_files/figure-html/cell-37-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="hybrid-htmlsvg-diagrams" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Hybrid HTML/SVG diagrams</h1>
<p>This package provides limited support for tree diagrams that mix HTML/CSS and SVG, using the former for layout and the latter for line drawing, via the <code>svgling.html</code> module. These have a number of limitations relative to pure SVG diagrams, with two main advantages: (i) the nodes can consist of arbitrary HTML/CSS, including mathjax, <code>xml.etree.ElementTree</code> objects, and more and (ii) sizing of the overall tree diagrams is fully automatic based on leaf node sizes. The limitations are detailed below, but the main one to know about is that these trees do not support branching greater than binary. As with the rest of this package, the hybrid layout techniques are single-pass and make do without any javascript. The rendering techniques require up-to-date and recent browsers. At the moment, these trees are less intended for direct instantiation and more intended for programmatic use.</p>
<p>The module interface is similar, with <code>svgling.html.draw_tree</code> as the main interface function, and <code>svgling.html.DivTreeLayout</code> as the main class parallel to <code>svgling.core.TreeLayout</code>, and <code>svgling.core.TreeOptions</code> used to configure the tree (though see below for supported parameters). After the following examples, I will give a precise list of the limitations relative to SVG diagrams and the supported options.</p>
<p>First, an example of the default output for one of our standard examples:</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>svgling.html.draw_tree(<span class="st">"S"</span>, (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"N"</span>, <span class="st">"elephant"</span>)), (<span class="st">"VP"</span>, (<span class="st">"V"</span>, <span class="st">"saw"</span>), (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"N"</span>, <span class="st">"rhinoceros"</span>))), horiz_spacing<span class="op">=</span>svgling.core.HorizSpacing.TEXT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px"><div style="grid-row:1;grid-column:1;justify-self:right;width:0;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;"><span style="text-align:center;">S</span></div></div><div style="grid-row:1;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">S</span></div></div><div style="grid-column:1;grid-row:2;justify-self:right;"><div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;"><div style="grid-column:2;grid-row:1;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="0" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-row:2;grid-column:1;justify-self:right;width:0;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;"><span style="text-align:center;">NP</span></div></div><div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">NP</span></div></div><div style="grid-column:1;grid-row:3;justify-self:right;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">D</span></div></div><div style="grid-column:1;grid-row:3;justify-self:center;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">the</span></div></div></div></div></div></div><div style="grid-column:2;grid-row:3;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">N</span></div></div><div style="grid-column:1;grid-row:3;justify-self:center;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">elephant</span></div></div></div></div></div></div></div></div><div style="grid-column:2;grid-row:2;"><div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="100" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-row:2;grid-column:1;justify-self:right;width:0;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;"><span style="text-align:center;">VP</span></div></div><div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">VP</span></div></div><div style="grid-column:1;grid-row:3;justify-self:right;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">V</span></div></div><div style="grid-column:1;grid-row:3;justify-self:center;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">saw</span></div></div></div></div></div></div><div style="grid-column:2;grid-row:3;"><div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="100" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-row:2;grid-column:1;justify-self:right;width:0;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;"><span style="text-align:center;">NP</span></div></div><div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">NP</span></div></div><div style="grid-column:1;grid-row:3;justify-self:right;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">D</span></div></div><div style="grid-column:1;grid-row:3;justify-self:center;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">the</span></div></div></div></div></div></div><div style="grid-column:2;grid-row:3;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">N</span></div></div><div style="grid-column:1;grid-row:3;justify-self:center;"><div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column:1;grid-row:1;height:32px;" align="center"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:2;justify-self:center;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">rhinoceros</span></div></div></div></div></div></div></div></div></div></div></div>
</div>
</div>
<p>The <code>HorizSpacing.EVEN</code> option can be used, but usually looks huge for unbalanced trees. (With comparable node padding, for this option only the spacing is identical to <code>svgling.core</code>.)</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>svgling.html.draw_tree(<span class="st">"S"</span>, (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"N"</span>, <span class="st">"elephant"</span>)), (<span class="st">"VP"</span>, (<span class="st">"V"</span>, <span class="st">"saw"</span>), (<span class="st">"NP"</span>, (<span class="st">"D"</span>, <span class="st">"the"</span>), (<span class="st">"N"</span>, <span class="st">"rhinoceros"</span>))),</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                       horiz_spacing<span class="op">=</span>svgling.core.HorizSpacing.EVEN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div style="display:inline-grid;grid-template-columns: repeat(2, 1fr);align-items:start;border:none;font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px" align="center"><div style="grid-column:1/3;grid-row:1;grid-gap:0px" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">S</span></div></div><div align="center" style="grid-column:1;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div align="center" style="grid-column:2;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:3;"><div style="display:inline-grid;grid-template-columns: repeat(2, 1fr);align-items:start;border:none;" align="center"><div style="grid-column:1/3;grid-row:1;grid-gap:0px" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">NP</span></div></div><div align="center" style="grid-column:1;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div align="center" style="grid-column:2;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:3;"><div align="center" style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column-1;grid-row:1;" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">D</span></div></div><div align="center" style="grid-column-1;grid-row:2;border:0;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column-1;grid-row:3;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">the</span></div></div></div></div><div style="grid-column:2;grid-row:3;"><div align="center" style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column-1;grid-row:1;" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">N</span></div></div><div align="center" style="grid-column-1;grid-row:2;border:0;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column-1;grid-row:3;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">elephant</span></div></div></div></div></div></div><div style="grid-column:2;grid-row:3;"><div style="display:inline-grid;grid-template-columns: repeat(2, 1fr);align-items:start;border:none;" align="center"><div style="grid-column:1/3;grid-row:1;grid-gap:0px" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">VP</span></div></div><div align="center" style="grid-column:1;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div align="center" style="grid-column:2;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:3;"><div align="center" style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column-1;grid-row:1;" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">V</span></div></div><div align="center" style="grid-column-1;grid-row:2;border:0;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column-1;grid-row:3;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">saw</span></div></div></div></div><div style="grid-column:2;grid-row:3;"><div style="display:inline-grid;grid-template-columns: repeat(2, 1fr);align-items:start;border:none;" align="center"><div style="grid-column:1/3;grid-row:1;grid-gap:0px" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">NP</span></div></div><div align="center" style="grid-column:1;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div align="center" style="grid-column:2;grid-row:2;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column:1;grid-row:3;"><div align="center" style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column-1;grid-row:1;" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">D</span></div></div><div align="center" style="grid-column-1;grid-row:2;border:0;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column-1;grid-row:3;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">the</span></div></div></div></div><div style="grid-column:2;grid-row:3;"><div align="center" style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;"><div style="grid-column-1;grid-row:1;" align="center"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">N</span></div></div><div align="center" style="grid-column-1;grid-row:2;border:0;height:32px;"><svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink"><defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line></svg></div><div style="grid-column-1;grid-row:3;"><div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;"><span style="text-align:center;">rhinoceros</span></div></div></div></div></div></div></div></div></div>
</div>
</div>
<p>The main immediate benefit for interactive use is the availability of MathJax in nodes. (<strong>caveat</strong>: latex rendering via HTML outputs will not work in Google Colab or VSCode.) Don’t forget to escape <code>\</code> characters (as <code>\\</code>) as needed, or use strings prefixed with <code>r</code> for “raw” mode. Here is an example illustrating the use of MathJax to show semantics representations:</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>svgling.html.draw_tree(</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"$</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Saw}</span><span class="st">(</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Elephant}</span><span class="st">(x),</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Rhino}</span><span class="st">(x))$"</span>,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"$</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Elephant}</span><span class="st">(x)$"</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"$</span><span class="ch">\\</span><span class="st">lambda f_{</span><span class="ch">\\</span><span class="st">langle e,t </span><span class="ch">\\</span><span class="st">rangle }{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}f(x)$"</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"$</span><span class="ch">\\</span><span class="st">lambda x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Elephant}</span><span class="st">(x)$"</span>),</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"$</span><span class="ch">\\</span><span class="st">lambda x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Saw}</span><span class="st">(x,</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Rhino}</span><span class="st">(x))$"</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"$</span><span class="ch">\\</span><span class="st">lambda y_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">lambda x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Saw}</span><span class="st">(x,y)$"</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>        (<span class="st">"$</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Rhino}</span><span class="st">(x)$"</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"$</span><span class="ch">\\</span><span class="st">lambda f_{</span><span class="ch">\\</span><span class="st">langle e,t </span><span class="ch">\\</span><span class="st">rangle }{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">iota x_e{:</span><span class="ch">\\</span><span class="st">:}f(x)$"</span>,</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"$</span><span class="ch">\\</span><span class="st">lambda x_e{:</span><span class="ch">\\</span><span class="st">:}</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Rhino}</span><span class="st">(x)$"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px">
<div style="grid-row:1;grid-column:1;justify-self:right;width:0;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;">
<span style="text-align:center;"><span class="math inline">\(\text{Saw}(\iota x_e{:\:}\text{Elephant}(x),\iota x_e{:\:}\text{Rhino}(x))\)</span></span>
</div>
</div>
<div style="grid-row:1;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\text{Saw}(\iota x_e{:\:}\text{Elephant}(x),\iota x_e{:\:}\text{Rhino}(x))\)</span></span>
</div>
</div>
<div style="grid-column:1;grid-row:2;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;">
<div style="grid-column:2;grid-row:1;height:32px;">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="0" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-row:2;grid-column:1;justify-self:right;width:0;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;">
<span style="text-align:center;"><span class="math inline">\(\iota x_e{:\:}\text{Elephant}(x)\)</span></span>
</div>
</div>
<div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\iota x_e{:\:}\text{Elephant}(x)\)</span></span>
</div>
</div>
<div style="grid-column:1;grid-row:3;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\lambda f_{\langle e,t \rangle }{:\:}\iota x_e{:\:}f(x)\)</span></span>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:3;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\lambda x_e{:\:}\text{Elephant}(x)\)</span></span>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:2;">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="100" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-row:2;grid-column:1;justify-self:right;width:0;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;">
<span style="text-align:center;"><span class="math inline">\(\lambda x_e{:\:}\text{Saw}(x,\iota x_e{:\:}\text{Rhino}(x))\)</span></span>
</div>
</div>
<div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\lambda x_e{:\:}\text{Saw}(x,\iota x_e{:\:}\text{Rhino}(x))\)</span></span>
</div>
</div>
<div style="grid-column:1;grid-row:3;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\lambda y_e{:\:}\lambda x_e{:\:}\text{Saw}(x,y)\)</span></span>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:3;">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="100" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-row:2;grid-column:1;justify-self:right;width:0;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;">
<span style="text-align:center;"><span class="math inline">\(\iota x_e{:\:}\text{Rhino}(x)\)</span></span>
</div>
</div>
<div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\iota x_e{:\:}\text{Rhino}(x)\)</span></span>
</div>
</div>
<div style="grid-column:1;grid-row:3;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\lambda f_{\langle e,t \rangle }{:\:}\iota x_e{:\:}f(x)\)</span></span>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:3;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(\lambda x_e{:\:}\text{Rhino}(x)\)</span></span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The recommended method of drawing multi-line nodes when using hybrid rendering is to use the html <code>&lt;br /&gt;</code> tag. In some versions of MathJax, using <code>\\</code> in math mode may work, though it will not center text. To simplify this, the module provides a convenience function <code>multiline_text</code> that uses HTML to do the linebreaks. See the gallery for a full example rendered using this technique; here is a fragment:</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgling.html</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> svgling.html <span class="im">import</span> multiline_text <span class="im">as</span> ml</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>svgling.html.draw_tree(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    ml(<span class="vs">r"$\iota x_e{:\:}\text</span><span class="sc">{Elephant}</span><span class="vs">(x)$"</span>, <span class="vs">r"$\text</span><span class="sc">{Type: }</span><span class="vs">e$"</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>        ml(<span class="vs">r"$\lambda f_{\langle e,t \rangle }{:\:}\iota x_e{:\:}f(x)$"</span>, <span class="vs">r"$\text</span><span class="sc">{Type: }</span><span class="vs">\langle \langle e,t\rangle ,e\rangle$"</span>),</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>        ml(<span class="vs">r"$\lambda x_e{:\:}\text</span><span class="sc">{Elephant}</span><span class="vs">(x)$"</span>, <span class="vs">r"$\text</span><span class="sc">{Type: }</span><span class="vs">\langle e,t\rangle$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px">
<div style="grid-row:1;grid-column:1;justify-self:right;width:0;">
<div style="display:grid;grid-template-columns:auto;float:right;transform:translate(50%);white-space:nowrap;">
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\iota x_e{:\:}\text{Elephant}(x)\)</span></span>
</div>
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\text{Type: }e\)</span></span>
</div>
</div>
</div>
<div style="grid-row:1;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="display:grid;grid-template-columns:auto;">
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\iota x_e{:\:}\text{Elephant}(x)\)</span></span>
</div>
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\text{Type: }e\)</span></span>
</div>
</div>
</div>
<div style="grid-column:1;grid-row:2;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:grid;grid-template-columns:auto;">
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\lambda f_{\langle e,t \rangle }{:\:}\iota x_e{:\:}f(x)\)</span></span>
</div>
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\text{Type: }\langle \langle e,t\rangle ,e\rangle\)</span></span>
</div>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:2;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:grid;grid-template-columns:auto;">
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\lambda x_e{:\:}\text{Elephant}(x)\)</span></span>
</div>
<div style="padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span><span class="math inline">\(\text{Type: }\langle e,t\rangle\)</span></span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>A more advanced technique to accomplish linebreaks, as well as many other things, would be to use an HTML node directly. More generally, there are several kinds of objects that can be used as nodes in <code>svgling.html</code>, which is much more flexible than <code>svgling.core</code> in this respect (see <code>svgling.html.to_html</code> for the conversion algorithm):</p>
<ul>
<li>a string (shown above). You can’t just embed html code in a string, it will show up as escaped html. But you can use <code>$..$</code> or other delimiters to insert MathJax. (Depending on the version, <code>\[..\]</code> may be more reliable than <code>$..$</code> for embedding in html like this.)</li>
<li>an <code>Element</code> object from the <a href="https://docs.python.org/3/library/xml.etree.elementtree.html"><code>xml.etree.ElementTree</code> API</a>. I will not document this in detail here, and this is intended for programmatic use. (In fact, this is how the <code>multiline_text</code> function above works – this function returns <code>Element</code> objects.)</li>
<li>an object that implements <code>_repr_latex_()</code> from the IPython API.</li>
<li>an object that implements <code>_repr_html_()</code> from the IPython API. The string outputted by this function <em>must</em> be parseable by <code>xml.etree.ElementTree.fromstring</code>, and if it isn’t the tree will fail to display. (One common source of this issue would be using <code>&amp;nbsp;</code> in the output, as unfortunately this class makes it a bit tricky to parse HTML entities. A second common source is to use text that is not enclosed in some kind of tag, e.g.&nbsp;a <code>&lt;span&gt;</code>.)</li>
<li>If none of the above work, the output of <code>repr</code> called on the object is used as a string.</li>
</ul>
<p>If you want to use HTML text interactively, one quick way to get an object that can be used as a node is to use <code>IPython.display.HTML</code> to turn an HTML string into an object that implements <code>_repr_html_()</code>.</p>
<p>You can mix all of these node types in a single tree, as in the following example, which demonstrates a hodgepodge of useful tricks:</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> HTML</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>svgling.html.draw_tree(<span class="st">"X"</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    (HTML(<span class="st">"&lt;span&gt;$</span><span class="ch">\\</span><span class="st">overline{</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{Y}</span><span class="st">}$&lt;br /&gt;Y2&lt;/span&gt;"</span>), <span class="st">'Z'</span>, <span class="st">'$Z</span><span class="ch">\'</span><span class="st">$'</span>),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'A'</span>, HTML(<span class="st">"&lt;div style=</span><span class="ch">\"</span><span class="st">text-align:center;border:1px dashed;background-color:lightgray;</span><span class="ch">\"</span><span class="st">&gt;&lt;span&gt;B&lt;br /&gt;$</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{some}</span><span class="st">^{</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{mathjax}</span><span class="st">^</span><span class="ch">\\</span><span class="st">text</span><span class="sc">{here}</span><span class="st">}$&lt;br /&gt;B3&lt;/span&gt;&lt;/div&gt;"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px">
<div style="grid-row:1;grid-column:1;justify-self:right;width:0;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;float:right;transform:translate(50%);white-space:nowrap;">
<span style="text-align:center;">X</span>
</div>
</div>
<div style="grid-row:1;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;">X</span>
</div>
</div>
<div style="grid-column:1;grid-row:2;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;">
<div style="grid-column:2;grid-row:1;height:32px;">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="0" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-row:2;grid-column:1;justify-self:right;width:0;">
<span style="float:right;transform:translate(50%);white-space:nowrap;"><span class="math inline">\(\overline{\text{Y}}\)</span><br>Y2</span>
</div>
<div style="grid-row:2;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<span><span class="math inline">\(\overline{\text{Y}}\)</span><br>Y2</span>
</div>
<div style="grid-column:1;grid-row:3;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;">Z</span>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:3;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;"><span class="math inline">\(Z'\)</span></span>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:2;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;">A</span>
</div>
</div>
<div style="grid-column:1;grid-row:3;justify-self:center;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="text-align:center;border:1px dashed;background-color:lightgray;">
<span>B<br><span class="math inline">\(\text{some}^{\text{mathjax}^\text{here}}\)</span><br>B3</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>As some of the discussion above has implied, the primary target for <code>svgling.html</code> is not interactive tree diagram construction per se, but rather programmatic use in packages that will generate complex HTML from structured python objects, for example the <a href="https://github.com/rawlins/lambda-notebook">Lambda Notebook</a>.</p>
<p>Trees in the <code>svgling.html</code> module support <code>tree_split</code>. The following extends the previous <code>ProbabilisticTree</code> example to show a custom split function for this class that generates HTML rather than SVG. It also demonstrates using the <code>svgling.figure.HTMLSideBySide</code> class to mix SVG and HTML diagrams.</p>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tree.probabilistic <span class="im">import</span> ProbabilisticTree</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> ProbabilisticTree.fromstring(<span class="st">"(X (Y leaf) leaf)"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>x.set_prob(<span class="fl">0.5</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>].set_prob(<span class="fl">0.2</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># now draw the tree using a custom node rendering function that incorporates both the label and the probability:</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ptree_split_html(t):</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># separate out the styling just for readability</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>        nodestyle <span class="op">=</span> <span class="st">'text-align:center;background-color:lightgray;border:1px dashed;padding: 0px 20px 0px 20px;margin: 0px 10px 0px 10px;'</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (HTML(<span class="ss">f"&lt;div style=</span><span class="ch">\"</span><span class="sc">{</span>nodestyle<span class="sc">}</span><span class="ch">\"</span><span class="ss">&gt;&lt;span&gt;</span><span class="sc">{</span>t<span class="sc">.</span>label()<span class="sc">}</span><span class="ss">&lt;/span&gt;&lt;br /&gt;&lt;span style=</span><span class="ch">\"</span><span class="ss">font-size: small;</span><span class="ch">\"</span><span class="ss">&gt;$p=</span><span class="sc">{</span>t<span class="sc">.</span>prob()<span class="sc">}</span><span class="ss">$&lt;/span&gt;&lt;/div&gt;"</span>), <span class="bu">list</span>(t))</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">AttributeError</span>:</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return None to indicate that this tree split function isn't handling `t`. This can happen</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># for leaf nodes, which are just strings in this nltk class.</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Alternatively, you could handle `str` here.</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="co"># default rendering, and rendering with probabilities.</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>svgling.figure.HTMLSideBySide(x,</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>                              svgling.draw_tree(x, tree_split<span class="op">=</span>svgling.core.probtree_split),</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>                              svgling.html.draw_tree(x, tree_split<span class="op">=</span>ptree_split_html))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div style="display: flex; flex-direction: row;">
<div style="padding: 0px 16px 0px 16px; flex-shrink: 0;">
<svg baseprofile="full" height="120px" preserveaspectratio="xMidYMid meet" style="font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px" version="1.1" viewbox="0,0,96.0,120.0" width="96px" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">X</text>
</svg>
<svg width="50%" x="0%" y="48px">
<defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">Y</text>
</svg>
<svg width="100%" x="0%" y="48px">
<defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">leaf</text>
</svg>
</svg>
<line stroke="black" x1="50%" x2="50%" y1="20px" y2="48px"></line></svg><line stroke="black" x1="50%" x2="25%" y1="20px" y2="48px"></line><svg width="50%" x="50%" y="48px"><defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">leaf</text></svg></svg><line stroke="black" x1="50%" x2="75%" y1="20px" y2="48px"></line></svg>
</div>
<div style="padding: 0px 16px 0px 16px; flex-shrink: 0;">
<svg baseprofile="full" height="120px" preserveaspectratio="xMidYMid meet" style="font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px" version="1.1" viewbox="0,0,136.0,120.0" width="136px" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">X [p=0.5]</text>
</svg>
<svg width="64.7059%" x="0%" y="48px">
<defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">Y [p=0.2]</text>
</svg>
<svg width="100%" x="0%" y="48px">
<defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">leaf</text>
</svg>
</svg>
<line stroke="black" x1="50%" x2="50%" y1="20px" y2="48px"></line></svg><line stroke="black" x1="50%" x2="32.3529%" y1="20px" y2="48px"></line><svg width="35.2941%" x="64.7059%" y="48px"><defs></defs><svg width="100%" x="0" y="0px"><defs></defs><text text-anchor="middle" x="50%" y="16px">leaf</text></svg></svg><line stroke="black" x1="50%" x2="82.3529%" y1="20px" y2="48px"></line></svg>
</div>
<div style="padding: 0px 16px 0px 16px; flex-shrink: 0;">
<div style="display:inline-grid;grid-template-columns: repeat(2, auto);align-items:start;border:none;font-family: times, serif; font-weight: normal; font-style: normal; font-size: 16px">
<div style="grid-row:1;grid-column:1;justify-self:right;width:0;">
<div style="text-align:center;background-color:lightgray;border:1px dashed;padding: 0px 20px 0px 20px;margin: 0px 10px 0px 10px;float:right;transform:translate(50%);white-space:nowrap;">
<span>X</span><br><span style="font-size: small;"><span class="math inline">\(p=0.5\)</span></span>
</div>
</div>
<div style="grid-row:1;grid-column:1/3;justify-self:center;height:0;overflow:hidden;padding-right:1em;padding-left:1em;">
<div style="text-align:center;background-color:lightgray;border:1px dashed;padding: 0px 20px 0px 20px;margin: 0px 10px 0px 10px;">
<span>X</span><br><span style="font-size: small;"><span class="math inline">\(p=0.5\)</span></span>
</div>
</div>
<div style="grid-column:1;grid-row:2;justify-self:right;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="100" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="text-align:center;background-color:lightgray;border:1px dashed;padding: 0px 20px 0px 20px;margin: 0px 10px 0px 10px;">
<span>Y</span><br><span style="font-size: small;"><span class="math inline">\(p=0.2\)</span></span>
</div>
</div>
<div style="grid-column:1;grid-row:3;justify-self:center;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="50" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;">leaf</span>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="grid-column:2;grid-row:2;">
<div style="display:inline-grid;grid-template-columns: 1fr;align-items:start;border:none;">
<div style="grid-column:1;grid-row:1;height:32px;" data-align="center">
<svg baseprofile="tiny" height="0" width="0" preserveaspectratio="none" version="1.2" viewbox="0,0,100,100" xmlns="http://www.w3.org/2000/svg" style="height:100%;width:100%;display:block;" xmlns:ev="http://www.w3.org/2001/xml-events" xlink="http://www.w3.org/1999/xlink">
<defs></defs><line stroke="black" x1="0" x2="50" y1="2" y2="98" stroke_width="1px" vector-effect="non-scaling-stroke"></line>
</svg>
</div>
<div style="grid-column:1;grid-row:2;justify-self:center;">
<div style="display:inline-block;padding-left:0.75em;padding-right:0.75em;text-align:center;">
<span style="text-align:center;">leaf</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="hybrid-diagram-compatibility" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="hybrid-diagram-compatibility"><span class="header-section-number">7.1</span> Hybrid diagram compatibility</h2>
<p>Hybrid rendering introduces some compatibility quirks, and Latex rendering in nodes in particular may vary across frontends. It is known not to work entirely in colab and VSCode. In some frontends, it may be useful to enable the markdown compatibility mode, which embeds tree rendering in <code>IPython.display.Markdown</code>-style objects, rather than regular HTML/Latex. In particular, this mode will enable <a href="https://quarto.org/">quarto</a> rendering of the MathJax examples in this section. To enable this, use:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>svgling.html.compat(svgling.html.Compat.USE_MARKDOWN)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that because Markdown in block-level HTML elements is not supported by the relevant markdown standards, using this mode should not have an effect on how trees or defined (and unfortunately does not allow embedding markdown in tree nodes). It will, however, interfere with the use of <code>\(..\)</code> and <code>\[..\]</code> as MathJax delimiters, and isn’t compatible with all tree layout settings.</p>
<p><strong>Caveat</strong>: some frontends, in particular, colab, strip all styling from HTML in Markdown. This compatibility setting will therefore work only in some cases.</p>
<p><strong>Limitations and quirks of <code>svgling.html</code></strong>:</p>
<ul>
<li>Branching can be at most binary.</li>
<li>Not supported: horizontal alignment, edge/per-node styles via the <code>svgling.core</code> API (only via raw html), tree annotations, automatic linebreaking (use html linebreaks).</li>
<li>Limited support: composite figures (<code>svling.figure.HTMLSideBySide</code> only), <code>TreeOption</code> settings (see below; many of these can be handled directly in HTML/CSS)</li>
<li>Standing bug: non-leaf nodes do not contribute correctly to the tree size calculations, resulting in extra whitespace in the left daughter branch for very wide parent nodes.</li>
<li>Technical limitation: html entities are not allowed.</li>
<li>Rendering outside of core Jupyter lab is not fully supported. MathJax rendering is dependent on frontend support for rendering latex in HTML output. This is best supported for core jupyter, and in particular, is broken in both colab and VSCode. Rendering is also affected by containing css, which can sometimes be quite unexpected (e.g.&nbsp;quarto rendered diagrams have to factor in that quarto uses bootstrap).</li>
</ul>
<p><strong>Supported and unsupported <code>TreeOptions</code> parameters</strong></p>
<ul>
<li>Supported: <code>distance_to_daughter</code>, <code>tree_split</code>, <code>font_style</code> and <code>font_size</code> (may get overridden by html or css)</li>
<li>Partial support: <code>debug</code> (doesn’t show grid), <code>horiz_spacing</code> (only <code>TEXT</code> and <code>EVEN</code>; <code>TEXT</code> is the default. <code>EVEN</code> is unreliable across frontends.)</li>
<li>Not supported: <code>vert_align</code>, <code>leaf_padding</code> (use CSS), <code>leaf_nodes_align</code>, <code>descend_direct</code>, text options (use CSS), <code>average_glyph_width</code></li>
</ul>
</section>
</section>
<section id="svgling-compatibility-and-conversion" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> <code>svgling</code> compatibility and conversion</h1>
<p>With default settings, the SVG files produced by <code>svgling</code> should be compatible with all major browsers (Chrome, Firefox, Safari, Edge) on both desktop and mobile, as well as all major svg editors/viewers/converters; if you find a compatibility issue with some browser, please <a href="https://github.com/rawlins/svgling/issues">report it as a bug</a>. (Note: with the deprecated <code>relative_units=True</code> setting, there are known incompatibilities with certain software packages that do not correctly handle nested <code>svg</code> tags.)</p>
<section id="file-output" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="file-output"><span class="header-section-number">8.1</span> File output</h2>
<p>To save SVG output to a file, see the <a href="https://svgwrite.readthedocs.io/en/stable/classes/drawing.html">svgwrite.Drawing api</a>; any object returned by <code>draw_tree(...).get_svg()</code> is <code>Drawing</code> object. For convenience, <code>svgling</code> classes also pass through <code>saveas</code>. For example:</p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # uncomment to write to `demotree.svg` with human-readable formatting</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># demo_tree = ("S", ("NP", ("D", "the"), ("N", "elephant")), ("VP", ("V", "saw"), ("NP", ("D", "the"), ("N", "rhinoceros"))))</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># svgling.draw_tree(demo_tree).saveas("demotree.svg", pretty=True)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(Since SVG is just text/xml, it can of course be written to a file via all sorts of other means.)</p>
<p>In addition, the module itself supports generating svg at the command line, if passed a valid tree description via python data structures. For example, the following command (on linux/macos) will generate the same file:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> svgling <span class="st">'("S", ("NP", ("D", "the"), ("N", "elephant")), ("VP", ("V", "saw"), ("NP", ("D", "the"), ("N", "rhinoceros"))))'</span> <span class="op">&gt;</span> demotree.svg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="format-conversion" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="format-conversion"><span class="header-section-number">8.2</span> Format conversion</h2>
<p>To convert generated <code>svg</code> images to other formats both raster and vector, you have many options, both interactive and not. Sometimes the quickest option to get a raster image is simply to use your OS’s screenshot tool, e.g.&nbsp;on mac, Shift+⌘+4 (and then select a screen region). For a more structured approach, <code>svgling</code> provides builtin support for doing format conversion via the <a href="https://cairosvg.org/"><code>cairosvg</code></a> package if it’s installed. The <code>svgling.utils</code> module provides a light wrapper for <code>cairosvg</code>’s <code>svg2png</code>, <code>svg2pdf</code>, and <code>svg2ps</code> that take any IPython svg-rendering object as their first argument, and otherwise have the same api as the corresponding <code>cairosvg</code> functions.</p>
<ul>
<li>If <code>write_to</code> is set, these functions will write to a file; otherwise they return a byte object. For the <code>svgling.utils.svg2png(..)</code> function, the returned object is conveniently compatible with <code>IPython.display.Image</code> for display in Jupyter frontends, as in the example below.</li>
<li>They take various parameters including <code>scale</code>, <code>height</code>, <code>width</code>, <code>dpi</code>, etc.</li>
<li>See the <a href="https://cairosvg.org/documentation/">cairosvg documentation</a> for details on other named parameters that these functions accept.</li>
<li><strong>Warning:</strong> one point of SVG images is that they are vector images, and therefore will appear as crisp as possible at all resolutions. This is not true of raster images! It’s recommended that you render to raster at a high enough resolution that the DPI can match whatever display device is intended. For embedding in other vector formats, for example PDF via LaTeX, conversion using <code>svg2pdf</code> may be more appropriate than raster conversion.</li>
</ul>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> svgling.utils, svgling.semantics, nltk</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> Image</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> svgling.semantics.DoubleBrackets(nltk.Tree.fromstring(<span class="st">"(S (NP (D the) (N elephant)) (VP (V saw) (NP (D the) (N rhinoceros))))"</span>))</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>Image(svgling.utils.svg2png(t, scale<span class="op">=</span><span class="fl">1.5</span>))</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># or, to generate a file, uncomment:</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># svgling.utils.svg2png(t, scale=2, write_to="elephant.png")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<p><img src="manual_files/figure-html/cell-46-output-1.png" class="img-fluid"></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>